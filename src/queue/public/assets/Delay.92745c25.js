import{B as g}from"./TableImg.0d8083c9.js";import{T as f}from"./useForm.c8a9257b.js";import{u as b}from"./useTable.7d37dc26.js";import{T as u}from"./index.23b71f02.js";import{g as _}from"./common.5d70ba75.js";import{b as x}from"./index.34a534cc.js";import F from"./MessageDetailModal.f7d47e2e.js";import{_ as j}from"./index.83ee0647.js";import{A as h,a0 as o,B as w,D,w as n,a5 as T,z as d}from"./vendor.0b8b9a83.js";/* empty css               *//* empty css               */import"./useWindowSizeFn.fd3295c9.js";import"./useContentViewHeight.6db2b245.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              */import"./sortable.esm.6bfbf233.js";/* empty css               *//* empty css               */const[B,{openModal:v}]=x(),C=[{title:"\u6D88\u606F",dataIndex:"message"},{title:"\u5EF6\u8FDF",dataIndex:"delay",width:"120px"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"time",width:"120px",customRender:({record:e})=>d(u,{value:e.time*1e3})},{title:"\u6267\u884C\u65F6\u95F4",dataIndex:"time",width:"120px",customRender:({record:e})=>d(u,{value:(e.time+e.delay)*1e3})}],y=h({components:{BasicTable:g,TableAction:f,MessageDetailModal:F},setup(){const[e]=b({columns:C,api:_("/app/queue/redis/delay/view"),actionColumn:{width:120,title:"Action",dataIndex:"action",slots:{customRender:"action"}}});function r(l){let i=[],t=JSON.parse(l.message);t.exec_time=new Date((t.time+t.delay)*1e3).toLocaleString().replace(/\//g,"-"),t.time=new Date(t.time*1e3).toLocaleString().replace(/\//g,"-"),t.data=JSON.stringify(t.data,null," ");let s={id:"id",time:"\u65F6\u95F4",delay:"\u5EF6\u8FDF\u65F6\u95F4",exec_time:"\u9884\u8BA1\u6267\u884C\u65F6\u95F4",attempts:"\u5C1D\u8BD5\u6B21\u6570",queue:"\u6240\u5C5E\u961F\u5217",data:"\u53C2\u6570"};for(let a in s)i.push({field:s[a]||a,value:t[a]});v(!0,i)}return{register:B,registerTable:e,handleView:r}}}),M={class:"p-4"};function A(e,r,l,i,t,s){const a=o("TableAction"),m=o("BasicTable"),c=o("MessageDetailModal");return w(),D("div",M,[n(m,{onRegister:e.registerTable},{action:T(({record:p})=>[n(a,{actions:[{label:"\u67E5\u770B",onClick:e.handleView.bind(null,p)}]},null,8,["actions"])]),_:1},8,["onRegister"]),n(c,{onRegister:e.register,minHeight:200,width:600},null,8,["onRegister"])])}var X=j(y,[["render",A]]);export{X as default};
