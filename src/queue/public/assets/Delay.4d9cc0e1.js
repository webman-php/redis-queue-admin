import{B as f}from"./TableImg.95324dda.js";import{T as g}from"./useForm.3c5e3c4b.js";import{u as _}from"./useTable.ea9ec969.js";import{T as u}from"./index.9fc8585c.js";import{g as x}from"./common.f0c9327e.js";import{b as F}from"./index.7411de63.js";import b from"./MessageDetailModal.c8f950cc.js";import{_ as j}from"./index.4236c607.js";import{A as h,a0 as o,B as w,D,w as n,a5 as T,z as d}from"./vendor.0b8b9a83.js";/* empty css               *//* empty css               */import"./useWindowSizeFn.fd3295c9.js";import"./useContentViewHeight.7ff5c4dd.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              */import"./sortable.esm.6bfbf233.js";/* empty css               *//* empty css               */const[B,{openModal:v}]=F(),C=[{title:"\u6D88\u606F",dataIndex:"message"},{title:"\u5EF6\u8FDF",dataIndex:"delay",width:"120px"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"time",width:"120px",customRender:({record:e})=>d(u,{value:e.time*1e3})},{title:"\u6267\u884C\u65F6\u95F4",dataIndex:"time",width:"120px",customRender:({record:e})=>d(u,{value:(e.time+e.delay)*1e3})}],y=h({components:{BasicTable:f,TableAction:g,MessageDetailModal:b},setup(){const[e]=_({columns:C,api:x("/app/queue/redis/delay/view"),actionColumn:{width:120,title:"Action",dataIndex:"action",slots:{customRender:"action"}}});function r(l){let i=[],t=JSON.parse(l.message);t.exec_time=new Date((t.time+t.delay)*1e3).toLocaleString().replace(/\//g,"-"),t.time=new Date(t.time*1e3).toLocaleString().replace(/\//g,"-"),t.data=JSON.stringify(t.data,null," ");let s={id:"id",time:"\u65F6\u95F4",delay:"\u5EF6\u8FDF\u65F6\u95F4",exec_time:"\u9884\u8BA1\u6267\u884C\u65F6\u95F4",attempts:"\u5C1D\u8BD5\u6B21\u6570",queue:"\u6240\u5C5E\u961F\u5217",data:"\u53C2\u6570"};for(let a in s)i.push({field:s[a]||a,value:t[a]});v(!0,i)}return{register:B,registerTable:e,handleView:r}}}),M={class:"p-4"};function A(e,r,l,i,t,s){const a=o("TableAction"),m=o("BasicTable"),c=o("MessageDetailModal");return w(),D("div",M,[n(m,{onRegister:e.registerTable},{action:T(({record:p})=>[n(a,{actions:[{label:"\u67E5\u770B",onClick:e.handleView.bind(null,p)}]},null,8,["actions"])]),_:1},8,["onRegister"]),n(c,{onRegister:e.register,minHeight:200,width:600},null,8,["onRegister"])])}var X=j(y,[["render",A]]);export{X as default};
